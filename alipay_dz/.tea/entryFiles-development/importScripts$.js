
if(!self.Map || !self.Set || !self.Symbol) {
    importScripts('https://gw.alipayobjects.com/as/g/appx_release/deps/1.0.3/es6-set-map-symbol.js');
     }
     
/**! __APPX-TRACE_START__ */ 
    !(function() {
      // 只有在ide模拟器中才执行的操作；同时排除AFAppX不存在的情况 eg: 真机快速预览 + 全息检测同时开启
      // 会把原本用在模拟器中的appxTrace放在真机上运行，排除这种情况，同时排除AFAppx 不存在的情况
      const AFAppX = (self).AFAppX;
      if (!AFAppX || !(AFAppX && AFAppX.bridge && AFAppX.bridge.isIDE)) return;
      var socketBridge = (function d(e){const t="__APPX_TRACE_SOCKET_STATUS__",a=self.AFAppX.bridge;a[t]=!1;return a.connectSocket({url:"ws://localhost:10086"}),a.onSocketOpen(()=>{a[t]=!0,a.sendSocketMessage({data:JSON.stringify({errno:0,msg:"channel connect, good luck"})})}),a.onSocketMessage(e=>{}),a.onSocketClose(()=>{a[t]=!1,e&&console.log("appx inject ws  close")}),a.onSocketError(e=>{console.log("appx inject ws error",e)}),a})(false);
      (function c(e,t){const a="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:new Function("return this")();a.__GLOBAL_SIMULATOR_WS_SEND_FN__=function(t){e.__APPX_TRACE_SOCKET_STATUS__&&e.sendSocketMessage({data:JSON.stringify({data:t})})}})(socketBridge, AlipayJSBridge);
    }());
    !function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function u(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r}function c(e){return this instanceof c?(this.v=e,this):new c(e)}var s=Object.freeze({__proto__:null,__extends:function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},get __assign(){return t},__rest:n,__decorate:function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:r,__generator:o,__exportStar:function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},__values:a,__read:i,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},__spreadArrays:u,__await:c,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||u(e,t)}))})}function u(e,t){try{(n=o[e](t)).value instanceof c?Promise.resolve(n.value.v).then(s,f):l(a[0][2],n)}catch(e){l(a[0][3],e)}var n}function s(e){u("next",e)}function f(e){u("throw",e)}function l(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}},__asyncDelegator:function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:c(e[r](t)),done:"return"===r}:o?o(t):t}:o}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}),f=null;try{f||(f="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof globalThis?globalThis:new Function("return this")())}catch(e){console.log(e)}var l=f,p=Date.now(),d="undefined"!=typeof __traceStartupParams?__traceStartupParams:l.__traceStartupParams?l.__traceStartupParams:{},h={scriptTimeBegin:p,global:l,startupParams:t(t({},{env:"device",biz:"performance"}),d),hook:{},appx:{}};h.global.AFAppX||(h.global=self),h.scriptTimeBegin||(h.scriptTimeBegin=Date.now()),h.startupParams||(h.startupParams={env:"device",biz:"performance"});var y,v,g={onLaunch:1,onShow:1,onHide:1,onError:1},m={onTitleClick:1,onOptionMenuClick:1,onPageScroll:1,onLoad:1,onReady:1,onShow:1,onHide:1,onUnload:1,onPullDownRefresh:1,onReachBottom:1,onShareAppMessage:1},_=function(){},b=console&&console.log?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return console.log.apply(console,u(["[APPXTRACE]: "+e],t))}:_,w=console&&console.warn?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return console.warn.apply(console,u(["[APPXTRACE WARN]: "+e],t))}:_,k=Date.now||function(){return(new Date).getTime()},P=0,O=function(){return P++},T=Object.prototype.toString,S=function(e){return T.call(e)},A=function(e){return void 0===e},j=function(e){return"function"==typeof e},C=function(e){return null!==e&&"object"==typeof e},x=function(e){return!C(e)},E=function(e,t){for(var n in t)e[n]=t[n];return e},M=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},q=function(e){return x(e)?e:S(e)},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?e.reduce((function(e,t,n){return e[n]=x(t)?t:S(t),e}),{}):void 0};!function(e){e.http="http"}(v||(v={}));var N=((y={})[v.http]=null,y);function I(e,t){return void 0===t?N[e]:(N[e]=t,t)}var D=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::\d+)?(?::\d+)?\)?\s*$/i,B=/^\s*(.*?)(?:\(.*?\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::\d+)?(?::\d+)?\s*$/i;var L,J=function(e){return setTimeout(e,0)},U=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(j(e))return e.apply(void 0,t)},F=function(e){if(!e){var t=h.appx.getCurrentPages();if(!t.length)return"";e=t[t.length-1]}if(!e)return"";var n=e,r=n.route,o=n["__@trace@--page_path"];return r&&"string"==typeof r?r:o},K=function(e,t){void 0===t&&(t="null");try{return JSON.stringify(e)}catch(t){b("stringify data error",e)}return t},H=function(){var e=h.startupParams.biz,t={starttime:h.scriptTimeBegin};return"performance"===e?t.isTraceDebug=!0:"netdebug"===e&&(t.isNetDebug=!0),t},V=function(e){return"performance"===e},X=function(e,t){try{return e()}catch(e){return t}},$=h.global,z=h.startupParams.env,G=function(){return b("context is not supported")},Y=function(e){var t=$.AlipayJSBridge&&$.AlipayJSBridge.call,n=$.fetch;t?G=function(e,n){var r;"simulator"!==z||"function"!=typeof $.__GLOBAL_SIMULATOR_WS_SEND_FN__||"postMethodTrace"!==e?t("internalAPI",{method:e,param:n}):$.__GLOBAL_SIMULATOR_WS_SEND_FN__(null!==(r=null==n?void 0:n.data)&&void 0!==r?r:"")}:n?G=function(e,t){var r={data:{method:e,param:t},action:"internalAPI"},o=encodeURIComponent(JSON.stringify(r));n("https://alipay.kylinBridge/?data="+o,{mode:"no-cors"}).then(_).catch(_)}:e&&(G=e)},W=[],Z=function(e,t){if("postMethodTrace"===e){if(t.data.match(/my\.sendSocketMessage/))return;clearTimeout(L),t.data.match(/ERROR/)?(W.push(t.data),G("postMethodTrace",{data:JSON.stringify(W)}),W.length=0):W.length<10?(W.push(t.data),L=setTimeout((function(){0!==W.length&&(G("postMethodTrace",{data:JSON.stringify(W)}),W.length=0)}),3e3)):(G("postMethodTrace",{data:JSON.stringify(W)}),W.length=0)}else G(e,t)},Q=h.scriptTimeBegin,ee={},te=null;function ne(e){ee[e]=null}function re(e){var t="perf-start:"+e;ee[t]={name:t,startTime:k()}}function oe(e){var t="perf-end:"+e;ee[t]={name:t,startTime:k()}}function ae(e){var t="perf-start:"+e,n="perf-end:"+e,r=ee[t],o=ee[n];if(r&&o){var a={startTime:r.startTime-Q,endTime:o.startTime-Q,tag:"",name:""};te=a,ne(t),ne(n)}}function ie(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.type+"-"+e.uid+"-"+e.key;"onReady"===e.key&&I(v.http,[]),"onShow"===e.key&&"Page"===e.type&&J(ue({key:e.key,type:"Page",pagePath:e.pagePath})),re(r);var o=e.value.apply(this,t);return oe(r),J((function(){var n;if(ae(r),"onReady"===e.key){var a=I(v.http);a&&a.length&&(n=a),I(v.http,null)}ce({tag:"M",name:!!e.events[e.key]?"APPX":"CUSTOM",detail:{page:e.pagePath,function:e.type+"."+e.key,param:R.apply(void 0,t),return:q(o),hasRequest:n}})})),o}}function ue(e){return function(){var t=k()-Q;Z("postMethodTrace",{data:se({tag:"M",name:"APPX_EVENT_INJECT",startTime:t,endTime:t,detail:{page:e.pagePath,function:e.type+"."+e.key}})})}}function ce(e){te&&(E(te,e),Z("postMethodTrace",{data:se(te)}),te=null)}function se(e){return e.tag+","+e.name+","+e.startTime+","+e.endTime+","+(t=e.detail,encodeURIComponent(JSON.stringify(t)).replace(/%20/g,"+"));var t}var fe=function(e,t){var n=(void 0===t?{}:t).raw;if(void 0!==n&&n)return e;return function(t){if(!C(t))return e(t);var n=O();for(var r in t){var o=t[r];M(t,r)&&j(o)&&o.prototype.constructor.name===r&&(t[r]=ie({key:r,value:o,type:"App",events:g,uid:n,pagePath:""}))}return e(t)}},le=function(e,t){var n=t.major,r=t.$global,o=t.raw;return void 0!==o&&o?e:function(t){var o;if(!C(t))return e(t);var a=null;if(1===n?a=r.currentPageConfig:2===n&&(a=null===(o=null==r?void 0:r.$AppxRegistry)||void 0===o?void 0:o.pageCurrentConfig),!a)return console.warn("invalid Page usage!"),void e(t);var i=O(),u={},c=a.pagePath;for(var s in u["__@trace@--page_path"]=c,t)if(M(t,s)){var f=t[s];j(f)?u[s]=ie({key:s,value:f,type:"Page",events:m,uid:i,pagePath:c}):u[s]=f}M(t,"onShow")||(u.onShow=ue({key:"onShow",type:"Page",uid:i,pagePath:c})),e(u)}};function pe(e){return function(e){if(!Array.isArray(e))throw new TypeError("--\x3e [APPXTRACE] Middleware stack must be an array!");for(var t=e.length,n=0;n<t;n++)if("function"!=typeof e[n])throw new TypeError("Middleware must be composed of function")}(e),function(t,n){var r=-1;return function o(a){if(a<=r)return Promise.reject(new Error("--\x3e [APPXTRACE] next() called multiple times!"));r=a;var i=e[a];if(a===e.length&&(i=n),!i)return Promise.resolve();try{return Promise.resolve(i(t,(function(){return o(a+1)})))}catch(e){return Promise.reject(e)}}(0)}}function de(e,t){return r(this,void 0,void 0,(function(){var n,r,a,i,u,c,s,f,l,p,d,h,y,v,g;return o(this,(function(o){switch(o.label){case 0:if(n=e.anymock,r=e.req,a=r.args,i=r.api,u=a[0],c=a[1],s=!1,A(c)&&j(u)&&(c=u,u={},s=!0),A(u)&&(u={}),n&&(f=n.match,l=n.success,p=n.data,f))try{U(l?u.success:u.fail,p),d=u.complete||c,U(d,p)}finally{return e.res=p,[2,t()]}return y=new Promise((function(e){h=e})),v=function(t){return function(n){return e.res=n,h(),U(t,n)}},s||(u.complete=v(u.complete)),g=s?[v(c)]:[u,c],e.bridgeReturn=i.apply(void 0,g),[4,y];case 1:return o.sent(),[2,t()]}}))}))}function he(e){var t,n=e.mark,r=ve(n.prefix);n.name=r,re(r),e.res=(t=e.req).api.apply(t,e.req.args),oe(r),J((function(){ae(r);var t=e.req,n=t.ns,o=t.name,a=t.method;ce({tag:"M",name:"BRIDGE",detail:{d:1,ns:n||void 0,n:o,m:"call"===o?a:void 0,p:F()}})}))}function ye(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=e.mark,r=ve(n.prefix),n.name=r,re(r),[4,t()];case 1:return o.sent(),oe(r),J((function(){ae(r),ce(function(e){var t=e.req,n=t.ns,r=t.name,o=t.method,a=t.args,i=e.res,u=e.anymock;return{tag:"M",name:"BRIDGE",detail:{ns:n||void 0,n:r,m:"call"===r?o:void 0,a:K(a,"[]"),r:K(i,"null"),p:F(),mk:u&&u.match?1:0}}}(e))})),[2]}}))}))}function ve(e){return""+e+O()}var ge=h.startupParams.biz,me=function(e,t){var n=e.req,r=n.name,o=n.args;if(!V(ge))return t();if(!function(e){return"request"===e||"httpRequest"===e}(r))return t();var a=o[0]||{},i=I(v.http),u=(a||{}).url;return i&&-1===i.indexOf(u)&&i.push(u),t()},_e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function we(e,t){return e(t={exports:{}},t.exports),t.exports}var ke=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ideAnymock="IDE_EXTENSION.ANYMOCK",e.ideLyraAnymock="IDE_LYRA.ANYMOCK",e.riverAnymock="THE_RIVER.ANYMOCK",e.morphoAnymock="minicreateweb",e.masAnymock="MAS.ANYMOCK",e.herboxAnymock="HERBOX.ANYMOCK",e.herbjsAnymock="HERBJS.ANYMOCK",e.chromeExtensionAnymock="CHROME_EXTENSION.ANYMOCK",e.nodejsAnymock="NODEJS.ANYMOCK",e.unknownAnymock="__UNKNOWN__.ANYMOCK"}(t.EClients||(t.EClients={}))}));be(ke);ke.EClients;var Pe=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RPC="RPC",e.HTTP="HTTP",e.MTOP="MTOP",e.JSAPI="JSAPI"}(t.ETypes||(t.ETypes={}))}));be(Pe);Pe.ETypes;var Oe=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),s.__exportStar(ke,t),s.__exportStar(Pe,t)}));be(Oe);var Te=function(e,t,n,r){function o(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function a(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}function c(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n=[80],r=1732584193,c=-271733879,s=-1732584194,f=271733878,l=-1009589776,p=0;p<e.length;p+=16){for(var d=r,h=c,y=s,v=f,g=l,m=0;m<80;m++){n[m]=m<16?e[p+m]:u(n[m-3]^n[m-8]^n[m-14]^n[m-16],1);var _=i(i(u(r,5),o(m,c,s,f)),i(i(l,n[m]),a(m)));l=f,f=s,s=u(c,30),c=r,r=_}r=i(r,d),c=i(c,h),s=i(s,y),f=i(f,v),l=i(l,g)}return[r,c,s,f,l]}function s(e){for(var t=[],n=(1<<r)-1,o=0;o<e.length*r;o+=r)t[o>>5]|=(e.charCodeAt(o/8)&n)<<32-r-o%32;return t}return n||(n="="),r||(r=8),function(e,t){return function(e){for(var t="",r=0;r<4*e.length;r+=3)for(var o=(e[r>>2]>>8*(3-r%4)&255)<<16|(e[r+1>>2]>>8*(3-(r+1)%4)&255)<<8|e[r+2>>2]>>8*(3-(r+2)%4)&255,a=0;a<4;a++)8*r+6*a>32*e.length?t+=n:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-a)&63);return t}(function(e,t){var n=s(e);n.length>16&&(n=c(n,e.length*r));for(var o=[16],a=[16],i=0;i<16;i++)o[i]=909522486^n[i],a[i]=1549556828^n[i];var u=c(o.concat(s(t)),512+t.length*r);return c(a.concat(u),672)}(e,t))}(e,t)},Se=we((function(e,t){!function(e){var t,n,r,o=String.fromCharCode;function a(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function i(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function u(e,t){return o(e>>t&63|128)}function c(e){if(0==(4294967168&e))return o(e);var t="";return 0==(4294965248&e)?t=o(e>>6&31|192):0==(4294901760&e)?(i(e),t=o(e>>12&15|224),t+=u(e,6)):0==(4292870144&e)&&(t=o(e>>18&7|240),t+=u(e,12),t+=u(e,6)),t+=o(63&e|128)}function s(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,o;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|s())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if((o=(15&e)<<12|s()<<6|s())>=2048)return i(o),o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=(7&e)<<18|s()<<12|s()<<6|s())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,r=-1,o="";++r<n;)o+=c(t[r]);return o},e.decode=function(e){t=a(e),n=t.length,r=0;for(var i,u=[];!1!==(i=f());)u.push(i);return function(e){for(var t,n=e.length,r=-1,a="";++r<n;)(t=e[r])>65535&&(a+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=o(t);return a}(u)}}(t)})),Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<1)throw Error("pipe requires at least one argument");t.forEach((function(e,t){if("function"!=typeof e)throw Error("pipe requires each argument to be a function. Argument #"+(t+1)+' is of type "'+(void 0===e?"undefined":Ae(e))+'"')}));var r=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Promise.all(n).then((function(t){return e.apply(null,t)}))}};return function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.map(r).reduce((function(e,t){return[t.apply(null,e)]}),n)[0]}};var Ce=we((function(e,t){function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function r(e){return e?n(e):""}function o(e){return"GET&"+r("/")+"&"+r(e)}function a(e){var t,n,r,o,a,i=(t=e,r=(n=n||{}).delimiter||".",o=n.maxDepth,a={},function e(t,i,u){u=u||1,Object.keys(t).forEach((function(c){var s=t[c];+c>=0&&(c=""+(+c+1));var f,l=n.safe&&Array.isArray(s),p=Object.prototype.toString.call(s),d=null!=(f=s)&&null!=f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f),h="[object Undefined]"===p,y=i?i+r+c:c;if(!l&&!d&&("[object Object]"===p||"[object Array]"===p)&&Object.keys(s).length&&(!n.maxDepth||u<o))return e(s,y,u+1);h||(a[y]=encodeURIComponent(s))}))}(t),a),u=Object.keys(i);return u.sort().reduce((function(e,t,n){return""+e+t+"="+i[t]+(n<u.length-1?"&":"")}),"")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return je(o,Se.encode,function(e){var t=e+"&";return function(e){return Te(t,e)}}(e),n)(a(t))},t.tokenToAk=function(e){void 0===e&&(e="");var t=e.split(/(\w{16})$/);return{accessId:t[0],accessSecret:t[1]}},t.akToToken=function(e,t){return""+e+t},t.isValidToken=function(e){return/^[a-zA-Z0-9]{32}$/.test(e)}}));be(Ce);Ce.tokenToAk,Ce.akToToken,Ce.isValidToken;var xe=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=s.__importStar(Ce),r=function(){function e(e){this.ctx=e}return e.prototype.request=function(e,t,r){return s.__awaiter(this,void 0,void 0,(function(){var o,a,i,u,c,f,l;return s.__generator(this,(function(p){switch(p.label){case 0:if(o=s.__assign({},this.ctx.anymockConfig,r),a=o.projectToken,i=t,!n.isValidToken(o.projectToken))throw new Error("missing or invalid project token: "+a);try{i=JSON.parse(JSON.stringify(i))}catch(e){console&&console.warn&&console.warn("Anymock 数据序列化失败：",e)}return u=n.tokenToAk(a),c=u.accessId,f=u.accessSecret,[4,n.default(f,i)];case 1:return l=p.sent(),[2,this.ctx.requestPipe({url:o.host+"/openapi"+e,headers:{"Content-Type":"application/json","Cache-Control":"no-cache",_accessid:c,_signature:l,_from:o.fromClient},method:"POST",data:i})]}}))}))},e}();t.default=r}));be(xe);var Ee=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.list=function(e,t){return void 0===t&&(t={}),s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/interface/list",t,e)]}))}))},t.prototype.create=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/interface/create",e,t)]}))}))},t.prototype.get=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/interface/"+e+"/get",{},t)]}))}))},t.prototype.update=function(e,t,n){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(r){return[2,this.request("/interface/"+e+"/update",t,n)]}))}))},t.prototype.delete=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/interface/"+e+"/delete",{},t)]}))}))},t}(s.__importDefault(xe).default);t.default=n}));be(Ee);var Me=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.query=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){return n={subType:""},[2,this.request("/mock/query",s.__assign({},n,e),t)]}))}))},t.prototype.update=function(e,t,n,r){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(o){return[2,this.request("/request/"+e+"/mock/"+t+"/update",n,r)]}))}))},t}(s.__importDefault(xe).default);t.default=n}));be(Me);var qe=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.get=function(e,t){return void 0===t&&(t={}),s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/project/get",t,e)]}))}))},t}(s.__importDefault(xe).default);t.default=n}));be(qe);var Re=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.create=function(e,t,n){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(r){return[2,this.request("/interface/"+e+"/request/create",t,n)]}))}))},t.prototype.get=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/request/"+e+"/get",{},t)]}))}))},t.prototype.update=function(e,t,n,r){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(o){return[2,this.request("/interface/"+e+"/request/"+t+"/update",n,r)]}))}))},t.prototype.delete=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/request/"+e+"/delete",{},t)]}))}))},t.prototype.addRequest=function(e,t){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(n){return[2,this.request("/request/add",e,t)]}))}))},t}(s.__importDefault(xe).default);t.default=n}));be(Re);var Ne=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ResponseBody=1]="ResponseBody",e[e.ResponseHeader=2]="ResponseHeader",e[e.RequestBody=3]="RequestBody",e[e.RequestHeader=4]="RequestHeader"}(t.MockTypeEnum||(t.MockTypeEnum={}))}));be(Ne);Ne.MockTypeEnum;var Ie=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=s.__importDefault(Ee),r=s.__importDefault(Me),o=s.__importDefault(qe),a=s.__importDefault(Re),i={host:"https://anymock.alipay.com",fromClient:"object"==typeof window&&"object"==typeof window.location?window.location.host||Oe.EClients.unknownAnymock:"object"==typeof _e&&"object"==typeof process?Oe.EClients.nodejsAnymock:Oe.EClients.unknownAnymock},u=function(){function e(e,t){this.anymockConfig=s.__assign({},i,e),this.requestPipe=t,this.mock=new r.default(this),this.project=new o.default(this),this.interface=new n.default(this),this.request=new a.default(this)}return e.prototype.setProjectToken=function(e){return this.anymockConfig=s.__assign({},this.anymockConfig,{projectToken:e}),this},e}();t.default=u,s.__exportStar(Ne,t)}));be(Ie);var De=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={fromClient:"anymock-middleware-koa"};t.getOpenapi=function(e){return new Ie.default(n,e)}}));be(De);De.getOpenapi;var Be=we((function(e,t){var n=_e&&_e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},r=_e&&_e.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=["getAppIdSync","setStorageSync","getStorageSync","removeStorageSync","clearStorageSync","getStorageInfoSync","getSystemInfoSync","getBatteryInfoSync","createSelectorQuery"].concat(["ap","renderTarget","isIDE","SDKVersion","createCanvasContext","createAnimation","createIntersectionObserver","createAnimationContext","createMapContext","canIUse","remoteLog","showToast","alert","pushWindow","callSync","registerWorker","tyroRequest"]);t.fetchRemoteBlackList=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,o]}))}))}}));be(Be);Be.fetchRemoteBlackList;var Le=we((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.logger=console,t.NAME="@ali/anymock-middleware-koa"}));be(Le);Le.logger,Le.NAME;var Je=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},Ue=Object.prototype.hasOwnProperty;function Fe(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var Ke={stringify:function(e,t){t=t||"";var n,r,o=[];for(r in"string"!=typeof t&&(t="?"),e)if(Ue.call(e,r)){if((n=e[r])||null!=n&&!isNaN(n)||(n=""),r=encodeURIComponent(r),n=encodeURIComponent(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?t+o.join("&"):""},parse:function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=Fe(t[1]),a=Fe(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}},He=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Ve=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,Xe=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function $e(e){return(e||"").toString().replace(Xe,"")}var ze=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ge={hash:1,query:1};function Ye(e){var t,n=("undefined"!=typeof window?window:void 0!==_e?_e:"undefined"!=typeof self?self:{}).location||{},r={},o=typeof(e=e||n);if("blob:"===e.protocol)r=new Ze(unescape(e.pathname),{});else if("string"===o)for(t in r=new Ze(e,{}),Ge)delete r[t];else if("object"===o){for(t in e)t in Ge||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=He.test(e.href))}return r}function We(e){e=$e(e);var t=Ve.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function Ze(e,t,n){if(e=$e(e),!(this instanceof Ze))return new Ze(e,t,n);var r,o,a,i,u,c,s=ze.slice(),f=typeof t,l=this,p=0;for("object"!==f&&"string"!==f&&(n=t,t=null),n&&"function"!=typeof n&&(n=Ke.parse),t=Ye(t),r=!(o=We(e||"")).protocol&&!o.slashes,l.slashes=o.slashes||r&&t.slashes,l.protocol=o.protocol||t.protocol||"",e=o.rest,o.slashes||(s[3]=[/(.*)/,"pathname"]);p<s.length;p++)"function"!=typeof(i=s[p])?(a=i[0],c=i[1],a!=a?l[c]=e:"string"==typeof a?~(u=e.indexOf(a))&&("number"==typeof i[2]?(l[c]=e.slice(0,u),e=e.slice(u+i[2])):(l[c]=e.slice(u),e=e.slice(0,u))):(u=a.exec(e))&&(l[c]=u[1],e=e.slice(0,u.index)),l[c]=l[c]||r&&i[3]&&t[c]||"",i[4]&&(l[c]=l[c].toLowerCase())):e=i(e);n&&(l.query=n(l.query)),r&&t.slashes&&"/"!==l.pathname.charAt(0)&&(""!==l.pathname||""!==t.pathname)&&(l.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],a=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(a=!0),n.splice(r,1),i--);return a&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(l.pathname,t.pathname)),Je(l.port,l.protocol)||(l.host=l.hostname,l.port=""),l.username=l.password="",l.auth&&(i=l.auth.split(":"),l.username=i[0]||"",l.password=i[1]||""),l.origin=l.protocol&&l.host&&"file:"!==l.protocol?l.protocol+"//"+l.host:"null",l.href=l.toString()}Ze.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||Ke.parse)(t)),r[e]=t;break;case"port":r[e]=t,Je(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;default:r[e]=t}for(var a=0;a<ze.length;a++){var i=ze[a];i[4]&&(r[i[1]]=r[i[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=Ke.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},Ze.extractProtocol=We,Ze.location=Ye,Ze.trimLeft=$e,Ze.qs=Ke;var Qe=Ze,et=we((function(e,t){var n=_e&&_e.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t=e.args[0]||{},n={url:t.url,method:t.method,data:t.data,operationType:t.operationType,apiVersion:t.apiVersion,apiName:t.apiName,success:t.success,fail:t.fail,complete:t.complete};return{name:e.method,opt:n}}(e),r=t.name,o=void 0===r?"":r,a=t.opt,i=o.toLowerCase(),u=Oe.ETypes.JSAPI,c=o,s="",f=n({},a);if("httprequest"===i||"request"===i){var l=Qe(a.url,!0);u=Oe.ETypes.HTTP,s=a.method||"GET",c=l.pathname,f.queries=l.query,f.headers={},f.body=a.data}return"rpc"===i&&(u=Oe.ETypes.RPC,s="",c=a.operationType),"mtop"===i&&(u=Oe.ETypes.MTOP,s=a.apiVersion,c=a.apiName),delete f.success,delete f.fail,delete f.complete,{type:u,subType:s,matching:c,parameters:f}}}));be(et);var tt=be(we((function(e,t){var n=_e&&_e.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=_e&&_e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},o=_e&&_e.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;if(!e.request)return Le.logger.error("["+Le.NAME+"]","No HTTP request lib, request to anymock for mock data is aborted"),function(e,n){return r(t,void 0,void 0,(function(){return o(this,(function(e){return[2,n()]}))}))};var a,i=De.getOpenapi((a=e.request,function(e){return new Promise((function(t,n){return a({url:e.url,method:e.method,data:JSON.stringify(e.data),dataType:"json",headers:e.headers,success:function(e){var n=e.data;return t(n)},fail:function(e){return n(e)}})}))}));return function(a,u){return r(t,void 0,void 0,(function(){var t,r,c,s,f,l,p,d,h,y,v,g,m,_,b,w;return o(this,(function(o){switch(o.label){case 0:return[4,Be.fetchRemoteBlackList(e.request)];case 1:if(t=o.sent(),Le.logger.log("["+Le.NAME+"] defaultBlackList: %j",t),r=(e.anymockConfig.blackList||[]).concat(t),Le.logger.log("["+Le.NAME+"] final blackList: %j",r),!function(e,t){Le.logger.log("["+Le.NAME+"] isValidJSApi req: %j, anymockConfig: %j",e,t);var n=t.whiteList,r=void 0===n?[]:n,o=t.blackList,a=void 0===o?[]:o,i=e.api,u=e.method;if("function"!=typeof i)return!1;var c=!0;r.length>0&&(c=c&&r.indexOf(u)>-1);a.length>0&&(c=c&&!(a.indexOf(u)>-1));return c}(a.req,n(n({},e.anymockConfig),{blackList:r})))return[2,u()];c=e.anymockConfig,s=c.projectToken,f=c.fromClient,l=c.host,p={projectToken:s,fromClient:f||Le.NAME},l&&(p.host=l),d=et.default(a.req),Le.logger.log("["+Le.NAME+"] mock query %j",{payload:d,config:p}),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,i.mock.query(d,p)];case 3:return h=o.sent(),[3,5];case 4:return y=o.sent(),Le.logger.error("["+Le.NAME+"] mock query failed",y),v={match:!1,success:!1,data:y},a.anymock=v,[2,u()];case 5:if(Le.logger.log("["+Le.NAME+"] mock query response: %j",h),g=null===(w=null===(b=null==h?void 0:h.data)||void 0===b?void 0:b.mock)||void 0===w?void 0:w.data,m={match:!!g,success:!!h.success,data:{}},h.success&&g){_=void 0;try{_=JSON.parse(g),m.data=_}catch(e){Le.logger.error("["+Le.NAME+"] JSON parse mockData failed",e),m.data=e}}else m.data=h;return console.log("["+Le.NAME+"] result: %j",m),a.anymock=m,[2,u()]}}))}))}}}))),nt=function(){var e=h.startupParams,r=h.appx,o=e.anymockConfig,a=e.biz;return(null==o?void 0:o.projectToken)?(b("["+a+"] anymock config",o),tt({request:function(e){var o=e||{},a=o.success,i=n(o,["success"]);r.call("tyroRequest",t(t({requestTaskId:0,timeout:3e4},i),{success:function(e){try{e.data=JSON.parse(e.data)}catch(e){w("tyroRequest res parse error",e)}return a&&a(e)}}))},anymockConfig:o})):function(e,t){return t()}},rt=["createWorker","createCanvasContext","createInnerAudioContext","getBackgroundAudioManager","createAudioContext","reportAnalytics","reportCustomEvent","createSelectorQuery","callUserTrack","setOptionMenu","showOptionMenu","getRecorderManager","getUpdateManager","getFileSystemManager","createAnimation","createIntersectionObserver","createMapContext","createRDSContext","hideKeyboard","createARContext","createCameraContext","createLivePlayerContext","createLivePusherContext","createWebViewContext","createLottieContext","createAICameraContext","createVideoContext","reportCustomError","saveSnapshot","saveTemplateSnapshot","showSharePanel","canIUse","remoteLog"];function ot(e,t){return!!/\w+Sync$/.test(e)||rt.indexOf(e)>-1}function at(e){var t=he,n=pe([ye,me,nt(),de]);return function e(r,o){return Object.keys(r).reduce((function(a,i){if(j(r[i])){var u=r[i];i.indexOf("Socket")>-1?a[i]=u:a[i]=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var c="call"!==i?{ns:o,name:i,method:i,args:e,api:u.bind(r)}:{ns:o,name:"call",method:e[0],args:e.slice(1),api:u.bind(r,e[0])},s={req:c,res:{},mark:{prefix:"Bridge-"+o,name:""}};if(ot(i))return t(s),s.res;var f=n(s).then((function(){var e=s.res;return e&&("error"in e||"errorMessage"in e)?Promise.reject(e):Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}));return s.bridgeReturn&&Object.assign(f,s.bridgeReturn),f}}else a[i]=r[i];if(!o&&["ap","tg","tb"].indexOf(i)>-1&&C(r[i])){var c=i;a[c]=e(r[c],c)}return a}),{})}(e,"")}var it,ut={page:"",component:"",isPage:!0,options:{data:""}},ct=h.global,st=h.appx,ft=h.hook,lt=h.scriptTimeBegin,pt=h.startupParams,dt=pt.biz,ht=pt.env,yt=ct.AFAppX,vt=Number(yt.bridge.SDKVersion.split(".")[0]);E(st,{version:yt.bridge.SDKVersion,major:vt});var gt=function(){var e;V(dt)&&(ct.onerror=function(e,t){var n=t.scriptTimeBegin;return function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e&&(t=e.apply(void 0,r));var a=k()-n,i={startTime:a,endTime:a,tag:"M",name:"ERROR",detail:{msg:r[0]||"",page:F()}};return Z("postMethodTrace",{data:se(i)}),t}}(null===(e=ct.onerror)||void 0===e?void 0:e.bind(ct),{scriptTimeBegin:lt}),function(e){var t=e.hook,n=e.scriptTimeBegin;t.onSetData=function(e){var t=ut,r=t.page,o=t.component,a=t.options.data,i=t.isPage,u=k()-n,c={startTime:u,endTime:u,tag:"M",name:"HOOK",detail:{type:"onSetData",dataLen:X((function(){return JSON.stringify(a).length}),0),dataKey:X((function(){return Object.keys(a)}),[]),isPage:i,path:i?r.route:o.is,stack:((new Error).stack||"").split("\n").map((function(e){var t=e.match(D)||e.match(B);return t?t[1]:""})).filter(Boolean)}};Z("postMethodTrace",{data:se(c)})}}({hook:ft,scriptTimeBegin:lt}))};("simulator"!==ht||(null===(it=null==yt?void 0:yt.bridge)||void 0===it?void 0:it.isIDE))&&(1===vt?function(){ct.AFAppX={};var e=yt.App,t=yt.Page,n=yt.$global,r=yt.bridge,o=yt.getCurrentPages;E(st,{$global:n,getCurrentPages:o,request:r.request||r.httpRequest,call:r.call.bind(r)});var a=function(e,t){Object.defineProperty(ct.AFAppX,e,{enumerable:!0,get:function(){return t}})};for(var i in yt)if(M(yt,i)){var u=void 0;switch(i){case"App":u=fe(e,{raw:!V(dt)});break;case"Page":u=le(t,{major:vt,$global:n,raw:!V(dt)});break;case"bridge":var c=at(r);Object.assign(r,c),u=r;break;default:u=yt[i]}a(i,u)}gt(),Y(r.call),Z("initialTraceDebug",H())}():2===vt&&function(){var e=yt.bridge;if(null==ct?void 0:ct.$AppxFramework){E(st,{request:e.request||e.httpRequest,call:e.call.bind(e)});var t=ct,n=t.getCurrentPages,r=t.App,o=t.Page,a=t.abridge;E(st,{getCurrentPages:n}),ct.App=fe(r,{raw:!V(dt)}).bind(ct),ct.Page=le(o,{raw:!V(dt),major:vt,$global:ct}).bind(ct);var i=at(a);Object.assign(e,i),gt(),Y(e.call),Z("initialTraceDebug",H())}}())}();
 /**! __APPX-TRACE_END__ */